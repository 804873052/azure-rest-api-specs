# yaml-language-server: $schema=https://raw.githubusercontent.com/Azure/azure-rest-api-specs/main/documentation/api-scenario/references/v1.2/schema.json
scope: ResourceGroup
variables:
  loadTestName:
    type: string
    prefix: loadtest

scenarios:
  - scenario: LoadTests
    description: Microsoft.LoadTestService/loadTests/{loadTestName}
    steps:
      - operationId: LoadTests_CreateOrUpdate
        # exampleFile: ..\examples\LoadTests_CreateOrUpdate.json
        parameters:
          LoadTestResource:
            location: $(location)
            tags:
              Team: Dev Exp
            properties:
              description: This is new load test resource
      - operationId: LoadTests_ListBySubscription
        exampleFile: ..\examples\LoadTests_ListBySubscription.json
      - operationId: LoadTests_Get
        exampleFile: ..\examples\LoadTests_Get.json
      - operationId: LoadTests_ListOutboundNetworkDependenciesEndpoints
        exampleFile: ..\examples\LoadTests_ListOutboundNetworkDependenciesEndpoints.json
      - operationId: LoadTests_ListByResourceGroup
        exampleFile: ..\examples\LoadTests_ListByResourceGroup.json
      - operationId: LoadTests_Update
        # exampleFile: ..\examples\LoadTests_Update.json
        parameters:
          LoadTestResourcePatchRequestBody:
            tags:
              Team: Dev Exp
              Division: LT
      - operationId: LoadTests_Delete
        exampleFile: ..\examples\LoadTests_Delete.json

  - scenario: Operations
    description: Microsoft.LoadTestService/operations
    steps:
      - operationId: Operations_List
        exampleFile: ..\examples\Operations_List.json

  - scenario: Quotas
    description: Microsoft.LoadTestService/locations/{location}/quotas/{quotaBucketName}
    steps:
      - operationId: Quotas_List
        exampleFile: ..\examples\Quotas_List.json
        outputVariables:
          quotaBucketName:
            type: string
            fromResponse: /value/0/name
      - operationId: Quotas_Get
        exampleFile: ..\examples\Quotas_Get.json
      - operationId: Quotas_CheckAvailability
        exampleFile: ..\examples\Quotas_CheckAvailability.json
        requestUpdate:
          - replace: /QuotaBucketRequest/properties/dimensions/subscriptionId
            value: $(subscriptionId)
        



