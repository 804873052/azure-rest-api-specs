scope: ResourceGroup
testScenarios:
  - description: test_mariadb_private_link_scenario
    steps:
      - step: RawStep_633
        method: HEAD
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2020-10-01
        requestHeaders:
          Accept: application/json
          Accept-Encoding: gzip, deflate
          CommandName: mariadb server create
          Connection: keep-alive
          ParameterSetName: '-l -g -n -u -p --sku-name'
          User-Agent: >-
            python/3.7.7 (Windows-10-10.0.19041-SP0) msrest/0.6.21
            msrest_azure/0.6.3 azure-mgmt-resource/12.0.0 Azure-SDK-For-Python
            AZURECLI/2.20.0
          accept-language: en-US
        statusCode: 204
      - step: RawStep_634
        method: POST
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.DBForMariaDB/checkNameAvailability?api-version=2018-06-01
        requestBody: '{"name":"azuredbclitest000002","type":"Microsoft.DBforMariaDB"}'
        requestHeaders:
          Accept: application/json
          Accept-Encoding: gzip, deflate
          CommandName: mariadb server create
          Connection: keep-alive
          Content-Length: '109'
          Content-Type: application/json
          ParameterSetName: '-l -g -n -u -p --sku-name'
          User-Agent: >-
            AZURECLI/2.20.0 azsdk-python-mgmt-rdbms/unknown Python/3.7.7
            (Windows-10-10.0.19041-SP0)
        responseExpected: '{"nameAvailable":true,"message":""}'
      - step: RawStep_635
        method: PUT
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBForMariaDB/servers/azuredbclitest000002?api-version=2018-06-01
        requestBody: >-
          {"sku":{"name":"GP_Gen5_2"},"properties":{"storageProfile":{"storageMB":51200,"storageAutogrow":"Enabled"},"createMode":"Default","administratorLogin":"cloudsa","administratorLoginPassword":"SecretPassword123"},"location":"westus"}
        requestHeaders:
          Accept: application/json
          Accept-Encoding: gzip, deflate
          CommandName: mariadb server create
          Connection: keep-alive
          Content-Length: '247'
          Content-Type: application/json
          ParameterSetName: '-l -g -n -u -p --sku-name'
          User-Agent: >-
            AZURECLI/2.20.0 azsdk-python-mgmt-rdbms/unknown Python/3.7.7
            (Windows-10-10.0.19041-SP0)
        statusCode: 202
        responseExpected: >-
          {"operation":"UpsertElasticServer","startTime":"2021-03-15T02:49:58.38Z"}
      - step: RawStep_636
        method: PUT
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBForMariaDB/servers/azuredbclitest000002/databases/defaultdb?api-version=2018-06-01
        requestBody: '{"properties":{"charset":"utf8"}}'
        requestHeaders:
          Accept: application/json
          Accept-Encoding: gzip, deflate
          CommandName: mariadb server create
          Connection: keep-alive
          Content-Length: '35'
          Content-Type: application/json
          ParameterSetName: '-l -g -n -u -p --sku-name'
          User-Agent: >-
            AZURECLI/2.20.0 azsdk-python-mgmt-rdbms/unknown Python/3.7.7
            (Windows-10-10.0.19041-SP0)
        statusCode: 202
        responseExpected: >-
          {"operation":"UpsertElasticServerDatabase","startTime":"2021-03-15T02:51:34.243Z"}
      - step: RawStep_637
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateLinkResources?api-version=2018-06-01
        requestHeaders:
          Accept: '*/*'
          Accept-Encoding: gzip, deflate
          CommandName: network private-link-resource list
          Connection: keep-alive
          ParameterSetName: '-g --name --type'
          User-Agent: python/3.7.7 (Windows-10-10.0.19041-SP0) AZURECLI/2.20.0
        responseExpected: >-
          {"value":[{"properties":{"groupId":"mariadbServer","requiredMembers":["mariadbServer"],"requiredZoneNames":["privatelink.mariadb.database.azure.com"]},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateLinkResources/plr","name":"plr","type":"Microsoft.DBforMariaDB/servers/privateLinkResources"}]}
      - step: Create_virtualNetworks_cli-vnet-000003
        resourceName: virtualNetworks_cli-vnet-000003
        exampleFile: ../examples/Create_virtualNetworks_cli-vnet-000003_Generated.json
        operationId: VirtualNetworks_CreateOrUpdate
      - step: Subnets_Get_639
        exampleFile: ../examples/Subnets_Get_4_Generated.json
        operationId: Subnets_Get
      - step: Create_subnets_cli-subnet-000004
        resourceName: subnets_cli-subnet-000004
        exampleFile: >-
          ../examples/Create_subnets_appgw_private_endpoint_subnet_Generated.json
        operationId: Subnets_CreateOrUpdate
      - step: RawStep_641
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBForMariaDB/servers/azuredbclitest000002?api-version=2018-06-01
        requestHeaders:
          Accept: application/json
          Accept-Encoding: gzip, deflate
          CommandName: mariadb server show
          Connection: keep-alive
          ParameterSetName: '-g -n'
          User-Agent: >-
            AZURECLI/2.20.0 azsdk-python-mgmt-rdbms/unknown Python/3.7.7
            (Windows-10-10.0.19041-SP0)
        responseExpected: >-
          {"sku":{"name":"GP_Gen5_2","tier":"GeneralPurpose","family":"Gen5","capacity":2},"properties":{"administratorLogin":"cloudsa","storageProfile":{"storageMB":51200,"backupRetentionDays":7,"geoRedundantBackup":"Disabled","storageAutogrow":"Enabled"},"version":"10.2","sslEnforcement":"Enabled","minimalTlsVersion":"TLSEnforcementDisabled","userVisibleState":"Ready","fullyQualifiedDomainName":"azuredbclitest000002.mariadb.database.azure.com","earliestRestoreDate":"2021-03-15T02:59:58.66+00:00","replicationRole":"None","masterServerId":"","replicaCapacity":5,"byokEnforcement":"Disabled","infrastructureEncryption":"Disabled","privateEndpointConnections":[],"publicNetworkAccess":"Enabled"},"location":"westus","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002","name":"azuredbclitest000002","type":"Microsoft.DBforMariaDB/servers"}
      - step: RawStep_642
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateLinkResources?api-version=2018-06-01
        requestHeaders:
          Accept: '*/*'
          Accept-Encoding: gzip, deflate
          CommandName: network private-link-resource list
          Connection: keep-alive
          ParameterSetName: '-g -n --type'
          User-Agent: python/3.7.7 (Windows-10-10.0.19041-SP0) AZURECLI/2.20.0
        responseExpected: >-
          {"value":[{"properties":{"groupId":"mariadbServer","requiredMembers":["mariadbServer"],"requiredZoneNames":["privatelink.mariadb.database.azure.com"]},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateLinkResources/plr","name":"plr","type":"Microsoft.DBforMariaDB/servers/privateLinkResources"}]}
      - step: Create_privateEndpoints_cli-pe-000005
        resourceName: privateEndpoints_cli-pe-000005
        exampleFile: ../examples/Create_privateEndpoints_cli-pe-000005_Generated.json
        operationId: PrivateEndpoints_CreateOrUpdate
      - step: RawStep_644
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBForMariaDB/servers/azuredbclitest000002/databases/defaultdb?api-version=2018-06-01
        requestHeaders:
          Accept: '*/*'
          Accept-Encoding: gzip, deflate
          CommandName: mariadb server create
          Connection: keep-alive
          ParameterSetName: '-l -g -n -u -p --sku-name'
          User-Agent: >-
            AZURECLI/2.20.0 azsdk-python-mgmt-rdbms/unknown Python/3.7.7
            (Windows-10-10.0.19041-SP0)
        responseExpected: >-
          {"properties":{"charset":"latin1","collation":"latin1_swedish_ci"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/databases/defaultdb","name":"defaultdb","type":"Microsoft.DBforMariaDB/servers/databases"}
      - step: RawStep_645
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBForMariaDB/servers/azuredbclitest000002?api-version=2018-06-01
        requestHeaders:
          Accept: application/json
          Accept-Encoding: gzip, deflate
          CommandName: mariadb server show
          Connection: keep-alive
          ParameterSetName: '-g -n'
          User-Agent: >-
            AZURECLI/2.20.0 azsdk-python-mgmt-rdbms/unknown Python/3.7.7
            (Windows-10-10.0.19041-SP0)
        responseExpected: >-
          {"sku":{"name":"GP_Gen5_2","tier":"GeneralPurpose","family":"Gen5","capacity":2},"properties":{"administratorLogin":"cloudsa","storageProfile":{"storageMB":51200,"backupRetentionDays":7,"geoRedundantBackup":"Disabled","storageAutogrow":"Enabled"},"version":"10.2","sslEnforcement":"Enabled","minimalTlsVersion":"TLSEnforcementDisabled","userVisibleState":"Ready","fullyQualifiedDomainName":"azuredbclitest000002.mariadb.database.azure.com","earliestRestoreDate":"2021-03-15T02:59:58.66+00:00","replicationRole":"None","masterServerId":"","replicaCapacity":5,"byokEnforcement":"Disabled","infrastructureEncryption":"Disabled","privateEndpointConnections":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000005-fd4f988c-f37c-43ac-92fb-20b852ef5a18","properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000005"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-approved","actionsRequired":"None"},"provisioningState":"Ready"}}],"publicNetworkAccess":"Enabled"},"location":"westus","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002","name":"azuredbclitest000002","type":"Microsoft.DBforMariaDB/servers"}
      - step: RawStep_646
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000005-fd4f988c-f37c-43ac-92fb-20b852ef5a18?api-version=2018-06-01
        requestHeaders:
          Accept: '*/*'
          Accept-Encoding: gzip, deflate
          CommandName: network private-endpoint-connection show
          Connection: keep-alive
          ParameterSetName: '--resource-name -g --name --type'
          User-Agent: python/3.7.7 (Windows-10-10.0.19041-SP0) AZURECLI/2.20.0
        responseExpected: >-
          {"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000005"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-approved","actionsRequired":"None"},"provisioningState":"Ready"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000005-fd4f988c-f37c-43ac-92fb-20b852ef5a18","name":"cli-pe-000005-fd4f988c-f37c-43ac-92fb-20b852ef5a18","type":"Microsoft.DBforMariaDB/servers/privateEndpointConnections"}
      - step: RawStep_647
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000005-fd4f988c-f37c-43ac-92fb-20b852ef5a18?api-version=2018-06-01
        requestHeaders:
          Accept: '*/*'
          Accept-Encoding: gzip, deflate
          CommandName: network private-endpoint-connection approve
          Connection: keep-alive
          ParameterSetName: '--resource-name -g --name --description --type'
          User-Agent: python/3.7.7 (Windows-10-10.0.19041-SP0) AZURECLI/2.20.0
        responseExpected: >-
          {"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000005"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-approved","actionsRequired":"None"},"provisioningState":"Ready"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000005-fd4f988c-f37c-43ac-92fb-20b852ef5a18","name":"cli-pe-000005-fd4f988c-f37c-43ac-92fb-20b852ef5a18","type":"Microsoft.DBforMariaDB/servers/privateEndpointConnections"}
      - step: RawStep_648
        method: PUT
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000005-fd4f988c-f37c-43ac-92fb-20b852ef5a18?api-version=2018-06-01
        requestBody: >-
          {"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000005"},"privateLinkServiceConnectionState":{"status":"Approved","description":"You
          are
          approved!","actionsRequired":"None"},"provisioningState":"Ready"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000005-fd4f988c-f37c-43ac-92fb-20b852ef5a18","name":"cli-pe-000005-fd4f988c-f37c-43ac-92fb-20b852ef5a18","type":"Microsoft.DBforMariaDB/servers/privateEndpointConnections"}
        requestHeaders:
          Accept: '*/*'
          Accept-Encoding: gzip, deflate
          CommandName: network private-endpoint-connection approve
          Connection: keep-alive
          Content-Length: '901'
          Content-Type: application/json
          ParameterSetName: '--resource-name -g --name --description --type'
          User-Agent: python/3.7.7 (Windows-10-10.0.19041-SP0) AZURECLI/2.20.0
        statusCode: 400
        responseExpected: >-
          {"error":{"code":"PrivateEndpointConnectionStatusNotPending","message":"Private
          Endpoint Connection Status is not Pending"}}
      - step: RawStep_649
        method: PUT
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000005-fd4f988c-f37c-43ac-92fb-20b852ef5a18?api-version=2018-06-01
        requestBody: >-
          {"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000005"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"You
          are
          rejected!","actionsRequired":"None"},"provisioningState":"Ready"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000005-fd4f988c-f37c-43ac-92fb-20b852ef5a18","name":"cli-pe-000005-fd4f988c-f37c-43ac-92fb-20b852ef5a18","type":"Microsoft.DBforMariaDB/servers/privateEndpointConnections"}
        requestHeaders:
          Accept: '*/*'
          Accept-Encoding: gzip, deflate
          CommandName: network private-endpoint-connection reject
          Connection: keep-alive
          Content-Length: '901'
          Content-Type: application/json
          ParameterSetName: '--resource-name -g --name --description --type'
          User-Agent: python/3.7.7 (Windows-10-10.0.19041-SP0) AZURECLI/2.20.0
        statusCode: 400
        responseExpected: >-
          {"error":{"code":"PrivateEndpointConnectionStatusNotPending","message":"Private
          Endpoint Connection Status is not Pending"}}
      - step: RawStep_650
        method: DELETE
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000005-fd4f988c-f37c-43ac-92fb-20b852ef5a18?api-version=2018-06-01
        requestHeaders:
          Accept: '*/*'
          Accept-Encoding: gzip, deflate
          CommandName: network private-endpoint-connection delete
          Connection: keep-alive
          Content-Length: '0'
          ParameterSetName: '--id -y'
          User-Agent: python/3.7.7 (Windows-10-10.0.19041-SP0) AZURECLI/2.20.0
        statusCode: 202
        responseExpected: >-
          {"operation":"DropElasticServerPrivateEndpointConnection","startTime":"2021-03-15T02:52:03.16Z"}
      - step: Create_privateEndpoints_cli-pe-000006
        resourceName: privateEndpoints_cli-pe-000006
        exampleFile: ../examples/Create_privateEndpoints_cli-pe-000006_Generated.json
        operationId: PrivateEndpoints_CreateOrUpdate
        variables:
          privateEndpointName: cli-pe-000006
      - step: RawStep_652
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBForMariaDB/servers/azuredbclitest000002?api-version=2018-06-01
        requestHeaders:
          Accept: application/json
          Accept-Encoding: gzip, deflate
          CommandName: mariadb server show
          Connection: keep-alive
          ParameterSetName: '-g -n'
          User-Agent: >-
            AZURECLI/2.20.0 azsdk-python-mgmt-rdbms/unknown Python/3.7.7
            (Windows-10-10.0.19041-SP0)
        responseExpected: >-
          {"sku":{"name":"GP_Gen5_2","tier":"GeneralPurpose","family":"Gen5","capacity":2},"properties":{"administratorLogin":"cloudsa","storageProfile":{"storageMB":51200,"backupRetentionDays":7,"geoRedundantBackup":"Disabled","storageAutogrow":"Enabled"},"version":"10.2","sslEnforcement":"Enabled","minimalTlsVersion":"TLSEnforcementDisabled","userVisibleState":"Ready","fullyQualifiedDomainName":"azuredbclitest000002.mariadb.database.azure.com","earliestRestoreDate":"2021-03-15T02:59:58.66+00:00","replicationRole":"None","masterServerId":"","replicaCapacity":5,"byokEnforcement":"Disabled","infrastructureEncryption":"Disabled","privateEndpointConnections":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000006-b98d23ea-42ae-4b9e-a577-22edb851f65d","properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000006"},"privateLinkServiceConnectionState":{"status":"Pending","description":"","actionsRequired":"None"},"provisioningState":"Ready"}}],"publicNetworkAccess":"Enabled"},"location":"westus","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002","name":"azuredbclitest000002","type":"Microsoft.DBforMariaDB/servers"}
      - step: RawStep_653
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000006-b98d23ea-42ae-4b9e-a577-22edb851f65d?api-version=2018-06-01
        requestHeaders:
          Accept: '*/*'
          Accept-Encoding: gzip, deflate
          CommandName: network private-endpoint-connection show
          Connection: keep-alive
          ParameterSetName: '--resource-name -g --name --type'
          User-Agent: python/3.7.7 (Windows-10-10.0.19041-SP0) AZURECLI/2.20.0
        responseExpected: >-
          {"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000006"},"privateLinkServiceConnectionState":{"status":"Pending","description":"","actionsRequired":"None"},"provisioningState":"Ready"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000006-b98d23ea-42ae-4b9e-a577-22edb851f65d","name":"cli-pe-000006-b98d23ea-42ae-4b9e-a577-22edb851f65d","type":"Microsoft.DBforMariaDB/servers/privateEndpointConnections"}
      - step: RawStep_654
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000006-b98d23ea-42ae-4b9e-a577-22edb851f65d?api-version=2018-06-01
        requestHeaders:
          Accept: '*/*'
          Accept-Encoding: gzip, deflate
          CommandName: network private-endpoint-connection approve
          Connection: keep-alive
          ParameterSetName: '--resource-name -g --name --description --type'
          User-Agent: python/3.7.7 (Windows-10-10.0.19041-SP0) AZURECLI/2.20.0
        responseExpected: >-
          {"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000006"},"privateLinkServiceConnectionState":{"status":"Pending","description":"","actionsRequired":"None"},"provisioningState":"Ready"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000006-b98d23ea-42ae-4b9e-a577-22edb851f65d","name":"cli-pe-000006-b98d23ea-42ae-4b9e-a577-22edb851f65d","type":"Microsoft.DBforMariaDB/servers/privateEndpointConnections"}
      - step: RawStep_655
        method: PUT
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000006-b98d23ea-42ae-4b9e-a577-22edb851f65d?api-version=2018-06-01
        requestBody: >-
          {"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000006"},"privateLinkServiceConnectionState":{"status":"Approved","description":"You
          are
          approved!","actionsRequired":"None"},"provisioningState":"Ready"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000006-b98d23ea-42ae-4b9e-a577-22edb851f65d","name":"cli-pe-000006-b98d23ea-42ae-4b9e-a577-22edb851f65d","type":"Microsoft.DBforMariaDB/servers/privateEndpointConnections"}
        requestHeaders:
          Accept: '*/*'
          Accept-Encoding: gzip, deflate
          CommandName: network private-endpoint-connection approve
          Connection: keep-alive
          Content-Length: '901'
          Content-Type: application/json
          ParameterSetName: '--resource-name -g --name --description --type'
          User-Agent: python/3.7.7 (Windows-10-10.0.19041-SP0) AZURECLI/2.20.0
        statusCode: 202
        responseExpected: >-
          {"operation":"ApproveElasticServerPrivateEndpointConnection","startTime":"2021-03-15T02:52:19.667Z"}
      - step: RawStep_656
        method: PUT
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000006-b98d23ea-42ae-4b9e-a577-22edb851f65d?api-version=2018-06-01
        requestBody: >-
          {"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000006"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"You
          are
          rejected!","actionsRequired":"None"},"provisioningState":"Ready"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000006-b98d23ea-42ae-4b9e-a577-22edb851f65d","name":"cli-pe-000006-b98d23ea-42ae-4b9e-a577-22edb851f65d","type":"Microsoft.DBforMariaDB/servers/privateEndpointConnections"}
        requestHeaders:
          Accept: '*/*'
          Accept-Encoding: gzip, deflate
          CommandName: network private-endpoint-connection reject
          Connection: keep-alive
          Content-Length: '901'
          Content-Type: application/json
          ParameterSetName: '--resource-name -g --name --description --type'
          User-Agent: python/3.7.7 (Windows-10-10.0.19041-SP0) AZURECLI/2.20.0
        statusCode: 400
        responseExpected: >-
          {"error":{"code":"PrivateEndpointConnectionStatusNotPending","message":"Private
          Endpoint Connection Status is not Pending"}}
      - step: RawStep_657
        method: DELETE
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000006-b98d23ea-42ae-4b9e-a577-22edb851f65d?api-version=2018-06-01
        requestHeaders:
          Accept: '*/*'
          Accept-Encoding: gzip, deflate
          CommandName: network private-endpoint-connection delete
          Connection: keep-alive
          Content-Length: '0'
          ParameterSetName: '--id -y'
          User-Agent: python/3.7.7 (Windows-10-10.0.19041-SP0) AZURECLI/2.20.0
        statusCode: 202
        responseExpected: >-
          {"operation":"DropElasticServerPrivateEndpointConnection","startTime":"2021-03-15T02:52:42.717Z"}
      - step: Create_privateEndpoints_cli-pe-000007
        resourceName: privateEndpoints_cli-pe-000007
        exampleFile: ../examples/Create_privateEndpoints_cli-pe-000007_Generated.json
        operationId: PrivateEndpoints_CreateOrUpdate
        variables:
          privateEndpointName: cli-pe-000007
      - step: RawStep_659
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBForMariaDB/servers/azuredbclitest000002?api-version=2018-06-01
        requestHeaders:
          Accept: application/json
          Accept-Encoding: gzip, deflate
          CommandName: mariadb server show
          Connection: keep-alive
          ParameterSetName: '-g -n'
          User-Agent: >-
            AZURECLI/2.20.0 azsdk-python-mgmt-rdbms/unknown Python/3.7.7
            (Windows-10-10.0.19041-SP0)
        responseExpected: >-
          {"sku":{"name":"GP_Gen5_2","tier":"GeneralPurpose","family":"Gen5","capacity":2},"properties":{"administratorLogin":"cloudsa","storageProfile":{"storageMB":51200,"backupRetentionDays":7,"geoRedundantBackup":"Disabled","storageAutogrow":"Enabled"},"version":"10.2","sslEnforcement":"Enabled","minimalTlsVersion":"TLSEnforcementDisabled","userVisibleState":"Ready","fullyQualifiedDomainName":"azuredbclitest000002.mariadb.database.azure.com","earliestRestoreDate":"2021-03-15T02:59:58.66+00:00","replicationRole":"None","masterServerId":"","replicaCapacity":5,"byokEnforcement":"Disabled","infrastructureEncryption":"Disabled","privateEndpointConnections":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000007-f894384e-9956-4bf3-996c-906cbc76ac35","properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000007"},"privateLinkServiceConnectionState":{"status":"Pending","description":"","actionsRequired":"None"},"provisioningState":"Ready"}}],"publicNetworkAccess":"Enabled"},"location":"westus","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002","name":"azuredbclitest000002","type":"Microsoft.DBforMariaDB/servers"}
      - step: RawStep_660
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000007-f894384e-9956-4bf3-996c-906cbc76ac35?api-version=2018-06-01
        requestHeaders:
          Accept: '*/*'
          Accept-Encoding: gzip, deflate
          CommandName: network private-endpoint-connection show
          Connection: keep-alive
          ParameterSetName: '--resource-name -g --name --type'
          User-Agent: python/3.7.7 (Windows-10-10.0.19041-SP0) AZURECLI/2.20.0
        responseExpected: >-
          {"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000007"},"privateLinkServiceConnectionState":{"status":"Pending","description":"","actionsRequired":"None"},"provisioningState":"Ready"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000007-f894384e-9956-4bf3-996c-906cbc76ac35","name":"cli-pe-000007-f894384e-9956-4bf3-996c-906cbc76ac35","type":"Microsoft.DBforMariaDB/servers/privateEndpointConnections"}
      - step: RawStep_661
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000007-f894384e-9956-4bf3-996c-906cbc76ac35?api-version=2018-06-01
        requestHeaders:
          Accept: '*/*'
          Accept-Encoding: gzip, deflate
          CommandName: network private-endpoint-connection reject
          Connection: keep-alive
          ParameterSetName: '--resource-name -g --name --description --type'
          User-Agent: python/3.7.7 (Windows-10-10.0.19041-SP0) AZURECLI/2.20.0
        responseExpected: >-
          {"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000007"},"privateLinkServiceConnectionState":{"status":"Pending","description":"","actionsRequired":"None"},"provisioningState":"Ready"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000007-f894384e-9956-4bf3-996c-906cbc76ac35","name":"cli-pe-000007-f894384e-9956-4bf3-996c-906cbc76ac35","type":"Microsoft.DBforMariaDB/servers/privateEndpointConnections"}
      - step: RawStep_662
        method: PUT
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000007-f894384e-9956-4bf3-996c-906cbc76ac35?api-version=2018-06-01
        requestBody: >-
          {"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000007"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"You
          are
          rejected!","actionsRequired":"None"},"provisioningState":"Ready"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000007-f894384e-9956-4bf3-996c-906cbc76ac35","name":"cli-pe-000007-f894384e-9956-4bf3-996c-906cbc76ac35","type":"Microsoft.DBforMariaDB/servers/privateEndpointConnections"}
        requestHeaders:
          Accept: '*/*'
          Accept-Encoding: gzip, deflate
          CommandName: network private-endpoint-connection reject
          Connection: keep-alive
          Content-Length: '901'
          Content-Type: application/json
          ParameterSetName: '--resource-name -g --name --description --type'
          User-Agent: python/3.7.7 (Windows-10-10.0.19041-SP0) AZURECLI/2.20.0
        statusCode: 202
        responseExpected: >-
          {"operation":"RejectElasticServerPrivateEndpointConnection","startTime":"2021-03-15T02:52:59.71Z"}
      - step: RawStep_663
        method: PUT
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000007-f894384e-9956-4bf3-996c-906cbc76ac35?api-version=2018-06-01
        requestBody: >-
          {"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000007"},"privateLinkServiceConnectionState":{"status":"Approved","description":"You
          are
          approved!","actionsRequired":"None"},"provisioningState":"Ready"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000007-f894384e-9956-4bf3-996c-906cbc76ac35","name":"cli-pe-000007-f894384e-9956-4bf3-996c-906cbc76ac35","type":"Microsoft.DBforMariaDB/servers/privateEndpointConnections"}
        requestHeaders:
          Accept: '*/*'
          Accept-Encoding: gzip, deflate
          CommandName: network private-endpoint-connection approve
          Connection: keep-alive
          Content-Length: '901'
          Content-Type: application/json
          ParameterSetName: '--resource-name -g --name --description --type'
          User-Agent: python/3.7.7 (Windows-10-10.0.19041-SP0) AZURECLI/2.20.0
        statusCode: 400
        responseExpected: >-
          {"error":{"code":"PrivateEndpointConnectionStatusNotPending","message":"Private
          Endpoint Connection Status is not Pending"}}
      - step: RawStep_664
        method: GET
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002?api-version=2018-06-01
        requestHeaders:
          Accept: '*/*'
          Accept-Encoding: gzip, deflate
          CommandName: network private-endpoint-connection list
          Connection: keep-alive
          ParameterSetName: '--name -g --type'
          User-Agent: python/3.7.7 (Windows-10-10.0.19041-SP0) AZURECLI/2.20.0
        responseExpected: >-
          {"sku":{"name":"GP_Gen5_2","tier":"GeneralPurpose","family":"Gen5","capacity":2},"properties":{"administratorLogin":"cloudsa","storageProfile":{"storageMB":51200,"backupRetentionDays":7,"geoRedundantBackup":"Disabled","storageAutogrow":"Enabled"},"version":"10.2","sslEnforcement":"Enabled","minimalTlsVersion":"TLSEnforcementDisabled","userVisibleState":"Ready","fullyQualifiedDomainName":"azuredbclitest000002.mariadb.database.azure.com","earliestRestoreDate":"2021-03-15T02:59:58.66+00:00","replicationRole":"None","masterServerId":"","replicaCapacity":5,"byokEnforcement":"Disabled","infrastructureEncryption":"Disabled","privateEndpointConnections":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000007-f894384e-9956-4bf3-996c-906cbc76ac35","properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/cli-pe-000007"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"You
          are
          rejected!","actionsRequired":"None"},"provisioningState":"Ready"}}],"publicNetworkAccess":"Enabled"},"location":"westus","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002","name":"azuredbclitest000002","type":"Microsoft.DBforMariaDB/servers"}
      - step: RawStep_665
        method: DELETE
        rawUrl: >-
          https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.DBforMariaDB/servers/azuredbclitest000002/privateEndpointConnections/cli-pe-000007-f894384e-9956-4bf3-996c-906cbc76ac35?api-version=2018-06-01
        requestHeaders:
          Accept: '*/*'
          Accept-Encoding: gzip, deflate
          CommandName: network private-endpoint-connection delete
          Connection: keep-alive
          Content-Length: '0'
          ParameterSetName: '--id -y'
          User-Agent: python/3.7.7 (Windows-10-10.0.19041-SP0) AZURECLI/2.20.0
        statusCode: 202
        responseExpected: >-
          {"operation":"DropElasticServerPrivateEndpointConnection","startTime":"2021-03-15T02:53:13.363Z"}
    variables:
      virtualNetworkName: cli-vnet-000003
      subnetName: cli-subnet-000004
      privateEndpointName: cli-pe-000005
