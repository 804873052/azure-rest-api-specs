# yaml-language-server: $schema=https://raw.githubusercontent.com/Azure/azure-rest-api-specs/main/documentation/api-scenario/references/v1.2/schema.json
scope: ResourceGroup

variables:
  location:
    type: string
  namespaceName:
    type: string
    prefix: namespac
  notificationHubName:
    type: string
    prefix: notifica
  authorizationRuleName:
    type: string
    prefix: authoriz

prepareSteps:
      - operationId: Namespaces_CreateOrUpdate
        exampleFile: ..\examples\Namespaces\CreateOrUpdate.json
        outputVariables:
          notificationhubsId:
            type: string
            fromResponse: /id
      - operationId: NotificationHubs_CreateOrUpdate
        exampleFile: ..\examples\NotificationHubs\CreateOrUpdate.json

scenarios:
# pass
  - scenario: Namespaces
    description: Microsoft.NotificationHubs/namespaces/{namespaceName}
    steps:
      - operationId: Namespaces_ListAll
        exampleFile: ..\examples\Namespaces\ListBySubscription.json
      - operationId: Namespaces_List
        exampleFile: ..\examples\Namespaces\ListByResourceGroup.json
      - operationId: Namespaces_Get
        exampleFile: ..\examples\Namespaces\Get.json
      - operationId: Namespaces_Update
        # exampleFile: ..\examples\Namespaces\Update.json
        parameters:
          parameters:
            tags:
              tag1: value1
      - operationId: Namespaces_CheckAvailability
        exampleFile: ..\examples\Namespaces\CheckAvailability.json
      - operationId: Namespaces_GetPnsCredentials
        exampleFile: ..\examples\Namespaces\PnsCredentialsGet.json
      - operationId: Namespaces_CreateOrUpdateAuthorizationRule
        exampleFile: ..\examples\Namespaces\AuthorizationRuleCreateOrUpdate.json
      - operationId: Namespaces_ListAuthorizationRules
        exampleFile: ..\examples\Namespaces\AuthorizationRuleList.json
      - operationId: Namespaces_GetAuthorizationRule
        exampleFile: ..\examples\Namespaces\AuthorizationRuleGet.json
      - operationId: Namespaces_RegenerateKeys
        exampleFile: ..\examples\Namespaces\AuthorizationRuleRegenerateKey.json
      - operationId: Namespaces_ListKeys
        exampleFile: ..\examples\Namespaces\AuthorizationRuleListKeys.json
      - operationId: Namespaces_DeleteAuthorizationRule
        exampleFile: ..\examples\Namespaces\AuthorizationRuleDelete.json

# pass
  - scenario: NotificationHubs
    description: Microsoft.NotificationHubs/namespaces/{namespaceName}/notificationHubs/{notificationHubName}
    steps:
      - operationId: NotificationHubs_List
        exampleFile: ..\examples\NotificationHubs\List.json
      - operationId: NotificationHubs_Get
        exampleFile: ..\examples\NotificationHubs\Get.json
      - operationId: NotificationHubs_Update
        # exampleFile: ..\examples\NotificationHubs\Update.json
        parameters:
          parameters:
            tags:
              tag2: value2
      - operationId: NotificationHubs_GetPnsCredentials
        exampleFile: ..\examples\NotificationHubs\PnsCredentialsGet.json
      # The notification has no target applications. 
      # - operationId: NotificationHubs_DebugSend
      #   exampleFile: ..\examples\NotificationHubs\DebugSend.json
      - operationId: NotificationHubs_CheckNotificationHubAvailability
        exampleFile: ..\examples\NotificationHubs\CheckAvailability.json
      - operationId: NotificationHubs_CreateOrUpdateAuthorizationRule
        exampleFile: ..\examples\NotificationHubs\AuthorizationRuleCreateOrUpdate.json
      - operationId: NotificationHubs_ListAuthorizationRules
        exampleFile: ..\examples\NotificationHubs\AuthorizationRuleList.json
      - operationId: NotificationHubs_GetAuthorizationRule
        exampleFile: ..\examples\NotificationHubs\AuthorizationRuleGet.json
      - operationId: NotificationHubs_RegenerateKeys
        exampleFile: ..\examples\NotificationHubs\AuthorizationRuleRegenerateKey.json
      - operationId: NotificationHubs_ListKeys
        exampleFile: ..\examples\NotificationHubs\AuthorizationRuleListKeys.json
      - operationId: NotificationHubs_DeleteAuthorizationRule
        exampleFile: ..\examples\NotificationHubs\AuthorizationRuleDelete.json

# pass
  - scenario: PrivateEndpointConnections
    description: Microsoft.NotificationHubs/namespaces/{namespaceName}/privateEndpointConnections/{privateEndpointConnectionName}
    steps:
      - step: Create_PrivateEndpoint
        armTemplate: ./templates/Create_PrivateEndpoint.json
      - operationId: PrivateEndpointConnections_List
        exampleFile: ..\examples\Namespaces\PrivateEndpointConnectionList.json
        outputVariables:
          privateEndpointConnectionName:
            type: string
            fromResponse: /value/name
      - operationId: PrivateEndpointConnections_Update
        exampleFile: ..\examples\Namespaces\PrivateEndpointConnectionUpdate.json
      - operationId: PrivateEndpointConnections_ListGroupIds
        exampleFile: ..\examples\Namespaces\PrivateLinkResourceList.json
      - operationId: PrivateEndpointConnections_Get
        exampleFile: ..\examples\Namespaces\PrivateEndpointConnectionGet.json
      - operationId: PrivateEndpointConnections_GetGroupId
        exampleFile: ..\examples\Namespaces\PrivateLinkResourceGet.json
      - operationId: PrivateEndpointConnections_Delete
        exampleFile: ..\examples\Namespaces\PrivateEndpointConnectionDelete.json

# pass
  - scenario: Operations
    description: Microsoft.NotificationHubs/operations
    steps:
      - operationId: Operations_List
        exampleFile: ..\examples\NHOperationsList.json

cleanUpSteps:
      - operationId: NotificationHubs_Delete
        exampleFile: ..\examples\NotificationHubs\Delete.json
      - operationId: Namespaces_Delete
        exampleFile: ..\examples\Namespaces\Delete.
