# yaml-language-server: $schema=https://raw.githubusercontent.com/Azure/azure-rest-api-specs/main/documentation/api-scenario/references/v1.2/schema.json
scope: ResourceGroup

variables:
  storageAccountName: monitorsana

prepareSteps:
  - step: StorageAccount_Create
    armTemplate: armtemplate/Create_StorageAccount.json

scenarios:
  - scenario: ActionGroups
    description: Microsoft.Insights/actionGroups
    variables:
      logProfileName:
        type: string
        prefix: logprofilena
    steps:
      - step: LogProfiles_CreateOrUpdate
        exampleFile: ..\examples\createOrUpdateLogProfile.json
        requestUpdate:
          - replace: /parameters/properties/storageAccountId
            value: $(storageAccountId)
          - remove: /parameters/properties/serviceBusRuleId
      - step: LogProfiles_List
        exampleFile: ..\examples\listLogProfile.json
      - step: LogProfiles_Delete
        exampleFile: ..\examples\deleteLogProfile.json