# yaml-language-server: $schema=https://raw.githubusercontent.com/Azure/azure-rest-api-specs/main/documentation/api-scenario/references/v1.2/schema.json
scope: ResourceGroup

variables:
  location:
    type: string
  eventSubscriptionName:
    type: string
    prefix: eventsubsc
  domainName:
    type: string
    prefix: domainname
  topicName:
    type: string
    prefix: topicname
  partnerTopicName:
    type: string
    prefix: partnertop
  partnerNamespaceName:
    type: string
    prefix: partnernam
  systemTopicName:
    type: string
    prefix: systemtopi
  parentType:
    type: string
    prefix: parenttype
  parentName:
    type: string
    prefix: parentname
  channelName:
    type: string
    prefix: channelnam
  partnerRegistrationName:
    type: string
    prefix: partnerreg
  domainTopicName:
    type: string
    prefix: domaintopi
  privateEndpointConnectionName:
    type: string
    prefix: privateend
  resourceTypeName:
    type: string
    prefix: resourcety
  resourceName:
    type: string
    prefix: resourcena

scenarios:
  - scenario: Domains
    description: Microsoft.EventGrid/domains
    steps:
      - step: Domains_CreateOrUpdate
        exampleFile: ..\examples\Domains_CreateOrUpdate.json
      - step: Domains_ListBySubscription
        exampleFile: ..\examples\Domains_ListBySubscription.json
      - step: Domains_ListByResourceGroup
        exampleFile: ..\examples\Domains_ListByResourceGroup.json
      - step: Domains_Get
        exampleFile: ..\examples\Domains_Get.json
      - step: Domains_Update
        exampleFile: ..\examples\Domains_Update.json
      - step: Domains_ListSharedAccessKeys
        exampleFile: ..\examples\Domains_ListSharedAccessKeys.json
      - step: Domains_RegenerateKey
        exampleFile: ..\examples\Domains_RegenerateKey.json
  # - scenario: DomainTopics # domains
  #   description: Microsoft.EventGrid/domains/topics
  #   steps:
      - step: DomainTopics_CreateOrUpdate
        exampleFile: ..\examples\DomainTopics_CreateOrUpdate.json
      - step: DomainTopics_ListByDomain
        exampleFile: ..\examples\DomainTopics_ListByDomain.json
      - step: DomainTopics_Get
        exampleFile: ..\examples\DomainTopics_Get.json
  # - scenario: DomainTopicEventSubscriptions ## domains topics
  #   description: Microsoft.EventGrid/domains/topics/eventSubscriptions
  #   steps:
      # - step: DomainTopicEventSubscriptions_CreateOrUpdate
      #   exampleFile: ..\examples\DomainTopicEventSubscriptions_CreateOrUpdate.json
      # - step: DomainTopicEventSubscriptions_List
      #   exampleFile: ..\examples\DomainTopicEventSubscriptions_List.json
      # - step: DomainTopicEventSubscriptions_Get
      #   exampleFile: ..\examples\DomainTopicEventSubscriptions_Get.json
      # - step: DomainTopicEventSubscriptions_Update
      #   exampleFile: ..\examples\DomainTopicEventSubscriptions_Update.json
      # - step: DomainTopicEventSubscriptions_GetFullUrl
      #   exampleFile: ..\examples\DomainTopicEventSubscriptions_GetFullUrl.json
      # - step: DomainTopicEventSubscriptions_GetDeliveryAttributes
      #   exampleFile: ..\examples\DomainTopicEventSubscriptions_GetDeliveryAttributes.json
  # - scenario: DomainEventSubscriptions # domains
  #   description:  Microsoft.EventGrid/domains/eventSubscriptions
  #   steps:
      # - step: DomainEventSubscriptions_CreateOrUpdate
      #   exampleFile: ..\examples\DomainEventSubscriptions_CreateOrUpdate.json
      # - step: DomainEventSubscriptions_List
      #   exampleFile: ..\examples\DomainEventSubscriptions_List.json
      # - step: DomainEventSubscriptions_Get
      #   exampleFile: ..\examples\DomainEventSubscriptions_Get.json
      # - step: DomainEventSubscriptions_Update
      #   exampleFile: ..\examples\DomainEventSubscriptions_Update.json
      # - step: DomainEventSubscriptions_GetDeliveryAttributes
      #   exampleFile: ..\examples\DomainEventSubscriptions_GetDeliveryAttributes.json
      # - step: DomainEventSubscriptions_GetFullUrl
      #   exampleFile: ..\examples\DomainEventSubscriptions_GetFullUrl.json

  - scenario: Topics
    description: Microsoft.EventGrid/topics
    steps:
      - step: Topics_CreateOrUpdate
        exampleFile: ..\examples\Topics_CreateOrUpdate.json
      - step: Topics_ListBySubscription
        exampleFile: ..\examples\Topics_ListBySubscription.json
      - step: Topics_ListByResourceGroup
        exampleFile: ..\examples\Topics_ListByResourceGroup.json
      - step: Topics_Get
        exampleFile: ..\examples\Topics_Get.json
      - step: Topics_ListEventTypes ### need check: provider namespace valid
        exampleFile: ..\examples\Topics_ListEventTypes.json
      - step: Topics_Update
        exampleFile: ..\examples\Topics_Update.json
      - step: Topics_ListSharedAccessKeys
        exampleFile: ..\examples\Topics_ListSharedAccessKeys.json
      - step: Topics_RegenerateKey
        exampleFile: ..\examples\Topics_RegenerateKey.json
  # # - scenario: TopicEventSubscriptions
  # #   description: Microsoft.EventGrid/topics/eventSubscriptions
  # #   steps:
  #     - step: TopicEventSubscriptions_CreateOrUpdate
  #       exampleFile: ..\examples\TopicEventSubscriptions_CreateOrUpdate.json
  #     - step: TopicEventSubscriptions_List
  #       exampleFile: ..\examples\TopicEventSubscriptions_List.json
  #     - step: TopicEventSubscriptions_Get
  #       exampleFile: ..\examples\TopicEventSubscriptions_Get.json
  #     - step: TopicEventSubscriptions_Update
  #       exampleFile: ..\examples\TopicEventSubscriptions_Update.json
  #     - step: TopicEventSubscriptions_GetDeliveryAttributes
  #       exampleFile: ..\examples\TopicEventSubscriptions_GetDeliveryAttributes.json
  #     - step: TopicEventSubscriptions_GetFullUrl
  #       exampleFile: ..\examples\TopicEventSubscriptions_GetFullUrl.json

##
  # - scenario: PartnerTopics
  #   description: Microsoft.EventGrid/partnerTopics
  #   steps:
  #     - step: PartnerTopics_CreateOrUpdate
  #       exampleFile: ..\examples\PartnerTopics_CreateOrUpdate.json
  #     - step: PartnerTopics_ListBySubscription
  #       exampleFile: ..\examples\PartnerTopics_ListBySubscription.json
  #     - step: PartnerTopics_ListByResourceGroup
  #       exampleFile: ..\examples\PartnerTopics_ListByResourceGroup.json
  #     - step: PartnerTopics_Get
  #       exampleFile: ..\examples\PartnerTopics_Get.json
  #     - step: PartnerTopics_Update
  #       exampleFile: ..\examples\PartnerTopics_Update.json
  #     - step: PartnerTopics_Activate
  #       exampleFile: ..\examples\PartnerTopics_Activate.json
  #     - step: PartnerTopics_Deactivate
  #       exampleFile: ..\examples\PartnerTopics_Deactivate.json
  # # - scenario: PartnerTopicEventSubscriptions # partnerTopics
  # #   description: Microsoft.EventGrid/partnerTopics/eventSubscriptions
  # #   steps:
  #     - step: PartnerTopicEventSubscriptions_CreateOrUpdate
  #       exampleFile: ..\examples\PartnerTopicEventSubscriptions_CreateOrUpdate.json
  #     - step: PartnerTopicEventSubscriptions_ListByPartnerTopic
  #       exampleFile: ..\examples\PartnerTopicEventSubscriptions_ListByPartnerTopic.json
  #     - step: PartnerTopicEventSubscriptions_Get
  #       exampleFile: ..\examples\PartnerTopicEventSubscriptions_Get.json
  #     - step: PartnerTopicEventSubscriptions_Update
  #       exampleFile: ..\examples\PartnerTopicEventSubscriptions_Update.json
  #     - step: PartnerTopicEventSubscriptions_GetFullUrl
  #       exampleFile: ..\examples\PartnerTopicEventSubscriptions_GetFullUrl.json
  #     - step: PartnerTopicEventSubscriptions_GetDeliveryAttributes
  #       exampleFile: ..\examples\PartnerTopicEventSubscriptions_GetDeliveryAttributes.json

  # - scenario: PartnerRegistrations 
  #   description: Microsoft.EventGrid/partnerRegistrations
  #   steps:
  #     - step: PartnerRegistrations_CreateOrUpdate
  #       exampleFile: ..\examples\PartnerRegistrations_CreateOrUpdate.json
  #       outputVariables:
  #         partnerRegistrationId:
  #           type: string
  #           fromResponse: /id
  #     - step: PartnerRegistrations_ListBySubscription
  #       exampleFile: ..\examples\PartnerRegistrations_ListBySubscription.json
  #     - step: PartnerRegistrations_Get
  #       exampleFile: ..\examples\PartnerRegistrations_Get.json
  #     - step: PartnerRegistrations_ListByResourceGroup
  #       exampleFile: ..\examples\PartnerRegistrations_ListByResourceGroup.json
  #     - step: PartnerRegistrations_Update
  #       exampleFile: ..\examples\PartnerRegistrations_Update.json
  # # - scenario: PartnerNamespaces
  # #   description: Microsoft.EventGrid/partnerNamespaces
  # #   steps:
  #     - step: PartnerNamespaces_CreateOrUpdate
  #       exampleFile: ..\examples\PartnerNamespaces_CreateOrUpdate.json
  #       requestUpdate:
  #         - replace: /partnerNamespaceInfo/properties/partnerRegistrationFullyQualifiedId
  #           value: $(partnerRegistrationId)
  #     - step: PartnerNamespaces_ListBySubscription
  #       exampleFile: ..\examples\PartnerNamespaces_ListBySubscription.json
  #     - step: PartnerNamespaces_ListByResourceGroup
  #       exampleFile: ..\examples\PartnerNamespaces_ListByResourceGroup.json
  #     - step: PartnerNamespaces_Get
  #       exampleFile: ..\examples\PartnerNamespaces_Get.json
  #     - step: PartnerNamespaces_Update
  #       exampleFile: ..\examples\PartnerNamespaces_Update.json
  #     - step: PartnerNamespaces_ListSharedAccessKeys
  #       exampleFile: ..\examples\PartnerNamespaces_ListSharedAccessKeys.json
  #     - step: PartnerNamespaces_RegenerateKey
  #       exampleFile: ..\examples\PartnerNamespaces_RegenerateKey.json
  # # - scenario: Channels # partnerNamespaces
  # #   description: Microsoft.EventGrid/partnerNamespaces/channels
  # #   steps:
  #     - step: Channels_CreateOrUpdate
  #       exampleFile: ..\examples\Channels_CreateOrUpdate.json
  #     - step: Channels_ListByPartnerNamespace
  #       exampleFile: ..\examples\Channels_ListByPartnerNamespace.json
  #     - step: Channels_Get
  #       exampleFile: ..\examples\Channels_Get.json
  #     - step: Channels_Update
  #       exampleFile: ..\examples\Channels_Update.json
  #     - step: Channels_GetFullUrl
  #       exampleFile: ..\examples\Channels_GetFullUrl.json

  # - scenario: SystemTopics
  #   description: Microsoft.EventGrid/systemTopics
  #   steps:
  #     - step: SystemTopics_CreateOrUpdate
  #       exampleFile: ..\examples\SystemTopics_CreateOrUpdate.json
  #       outputVariables:
  #         systemTopicId:
  #           type: string
  #           fromResponse: /id
  #     - step: SystemTopics_ListBySubscription
  #       exampleFile: ..\examples\SystemTopics_ListBySubscription.json
  #     - step: SystemTopics_ListByResourceGroup
  #       exampleFile: ..\examples\SystemTopics_ListByResourceGroup.json
  #     - step: SystemTopics_Get
  #       exampleFile: ..\examples\SystemTopics_Get.json
  #     - step: SystemTopics_Update
  #       exampleFile: ..\examples\SystemTopics_Update.json
  # # - scenario: SystemTopicEventSubscriptions
  # #   description: Microsoft.EventGrid/systemTopics/eventSubscriptions
  # #   steps:
  #     - step: SystemTopicEventSubscriptions_CreateOrUpdate
  #       exampleFile: ..\examples\SystemTopicEventSubscriptions_CreateOrUpdate.json
  #     - step: SystemTopicEventSubscriptions_ListBySystemTopic
  #       exampleFile: ..\examples\SystemTopicEventSubscriptions_ListBySystemTopic.json
  #     - step: SystemTopicEventSubscriptions_Get
  #       exampleFile: ..\examples\SystemTopicEventSubscriptions_Get.json
  #     - step: SystemTopicEventSubscriptions_Update
  #       exampleFile: ..\examples\SystemTopicEventSubscriptions_Update.json
  #     - step: SystemTopicEventSubscriptions_GetFullUrl
  #       exampleFile: ..\examples\SystemTopicEventSubscriptions_GetFullUrl.json
  #     - step: SystemTopicEventSubscriptions_GetDeliveryAttributes
  #       exampleFile: ..\examples\SystemTopicEventSubscriptions_GetDeliveryAttributes.json
    # - scenario: ExtensionTopics
    #   description: Microsoft.EventGrid/extensionTopics/default
    #   steps:
      # - step: ExtensionTopics_Get
      #   exampleFile: ..\examples\ExtensionTopics_Get.json
      #   requestUpdate:
      #     - replace: /scope
      #       value: $(systemTopicId)

### AuthorizationFailed
  # - scenario: EventSubscriptions
  #   description: Microsoft.EventGrid/eventSubscriptions
  #   steps:
  #     - step: EventSubscriptions_CreateOrUpdate
  #       exampleFile: ..\examples\EventSubscriptions_CreateOrUpdateForSubscription.json
  #     - step: EventSubscriptions_ListGlobalBySubscription
  #       exampleFile: ..\examples\EventSubscriptions_ListGlobalBySubscription.json
  #     - step: EventSubscriptions_ListGlobalBySubscriptionForTopicType
  #       exampleFile: ..\examples\EventSubscriptions_ListGlobalBySubscriptionForTopicType.json
  #     - step: EventSubscriptions_ListGlobalByResourceGroup
  #       exampleFile: ..\examples\EventSubscriptions_ListGlobalByResourceGroup.json
  #     - step: EventSubscriptions_ListRegionalByResourceGroup
  #       exampleFile: ..\examples\EventSubscriptions_ListRegionalByResourceGroup.json
  #     - step: EventSubscriptions_ListByDomainTopic
  #       exampleFile: ..\examples\EventSubscriptions_ListByDomainTopic.json
  #     - step: EventSubscriptions_Get
  #       exampleFile: ..\examples\EventSubscriptions_GetForSubscription.json
  #     - step: EventSubscriptions_ListRegionalBySubscription
  #       exampleFile: ..\examples\EventSubscriptions_ListRegionalBySubscription.json
  #     - step: EventSubscriptions_ListRegionalBySubscriptionForTopicType
  #       exampleFile: ..\examples\EventSubscriptions_ListRegionalBySubscriptionForTopicType.json
  #     - step: EventSubscriptions_ListRegionalByResourceGroupForTopicType
  #       exampleFile: ..\examples\EventSubscriptions_ListRegionalByResourceGroupForTopicType.json
  #     - step: EventSubscriptions_ListByResource
  #       exampleFile: ..\examples\EventSubscriptions_ListByResource.json
  #     - step: EventSubscriptions_ListGlobalByResourceGroupForTopicType
  #       exampleFile: ..\examples\EventSubscriptions_ListGlobalByResourceGroupForTopicType.json
  #     - step: EventSubscriptions_Update
  #       exampleFile: ..\examples\EventSubscriptions_UpdateForSubscription.json
  #     - step: EventSubscriptions_GetDeliveryAttributes
  #       exampleFile: ..\examples\EventSubscriptions_GetDeliveryAttributes.json
  #     - step: EventSubscriptions_GetFullUrl
  #       exampleFile: ..\examples\EventSubscriptions_GetFullUrlForSubscription.json






      # - step: PrivateEndpointConnections_Update
      #   exampleFile: ..\examples\PrivateEndpointConnections_Update.json
      # - step: PrivateEndpointConnections_ListByResource
      #   exampleFile: ..\examples\PrivateEndpointConnections_ListByResource.json
      # - step: PrivateEndpointConnections_Get
      #   exampleFile: ..\examples\PrivateEndpointConnections_Get.json

  # - scenario: PartnerConfigurations
  #   description: Microsoft.EventGrid/partnerConfigurations/default
  #   steps:
  #     - step: PartnerConfigurations_CreateOrUpdate
  #       exampleFile: ..\examples\PartnerConfigurations_CreateOrUpdate.json
  #       requestUpdate:
  #         - add: /partnerConfigurationInfo/location
  #           value: $(location)
        
  #     - step: PartnerConfigurations_ListBySubscription
  #       exampleFile: ..\examples\PartnerConfigurations_ListBySubscription.json
  #     - step: PartnerConfigurations_Get
  #       exampleFile: ..\examples\PartnerConfigurations_Get.json
  #     - step: PartnerConfigurations_ListByResourceGroup
  #       exampleFile: ..\examples\PartnerConfigurations_ListByResourceGroup.json
  #     - step: PartnerConfigurations_Update
  #       exampleFile: ..\examples\PartnerConfigurations_Update.json
  #     - step: PartnerConfigurations_AuthorizePartner
  #       exampleFile: ..\examples\PartnerConfigurations_AuthorizePartner.json
  #     - step: PartnerConfigurations_UnauthorizePartner
  #       exampleFile: ..\examples\PartnerConfigurations_UnauthorizePartner.json

  - scenario: Operations
    description: Microsoft.EventGrid/operations
    steps:
      - step: Operations_List
        exampleFile: ..\examples\Operations_List.json

  - scenario: TopicTypes
    description: Microsoft.EventGrid/topicTypes
    steps:
      - step: TopicTypes_List
        exampleFile: ..\examples\TopicTypes_List.json
      - step: TopicTypes_Get
        exampleFile: ..\examples\TopicTypes_Get.json
      - step: TopicTypes_ListEventTypes
        exampleFile: ..\examples\TopicTypes_ListEventTypes.json

  - scenario: VerifiedPartners
    description: Microsoft.EventGrid/verifiedPartners
    steps:
      - step: VerifiedPartners_List
        exampleFile: ..\examples\VerifiedPartners_List.json
      - step: VerifiedPartners_Get
        exampleFile: ..\examples\VerifiedPartners_Get.json
        requestUpdate:
          - replace: /verifiedPartnerName
            value: Auth0
        

      # - step: PrivateLinkResources_ListByResource
      #   exampleFile: ..\examples\PrivateLinkResources_ListByResource.json
      # - variables:
      #     privateLinkResourceName:
      #       type: string
      #       prefix: privatelin
      #   step: PrivateLinkResources_Get
      #   exampleFile: ..\examples\PrivateLinkResources_Get.json



      # - step: PartnerConfigurations_Delete
      #   exampleFile: ..\examples\PartnerConfigurations_Delete.json
      # - step: PrivateEndpointConnections_Delete
      #   exampleFile: ..\examples\PrivateEndpointConnections_Delete.json
      # - step: DomainTopics_Delete
      #   exampleFile: ..\examples\DomainTopics_Delete.json
      # - step: PartnerRegistrations_Delete
      #   exampleFile: ..\examples\PartnerRegistrations_Delete.json
      # - step: Channels_Delete
      #   exampleFile: ..\examples\Channels_Delete.json
      # - step: PartnerTopicEventSubscriptions_Delete
      #   exampleFile: ..\examples\PartnerTopicEventSubscriptions_Delete.json
      # - step: DomainEventSubscriptions_Delete
      #   exampleFile: ..\examples\DomainEventSubscriptions_Delete.json
      # - step: DomainTopicEventSubscriptions_Delete
      #   exampleFile: ..\examples\DomainTopicEventSubscriptions_Delete.json
      # - step: EventSubscriptions_Delete
      #   exampleFile: ..\examples\EventSubscriptions_DeleteForSubscription.json
      # - step: SystemTopicEventSubscriptions_Delete
      #   exampleFile: ..\examples\SystemTopicEventSubscriptions_Delete.json
      # - step: TopicEventSubscriptions_Delete
      #   exampleFile: ..\examples\TopicEventSubscriptions_Delete.json
      # - step: SystemTopics_Delete
      #   exampleFile: ..\examples\SystemTopics_Delete.json
      # - step: PartnerNamespaces_Delete
      #   exampleFile: ..\examples\PartnerNamespaces_Delete.json
      # - step: PartnerTopics_Delete
      #   exampleFile: ..\examples\PartnerTopics_Delete.json
      # - step: Topics_Delete
      #   exampleFile: ..\examples\Topics_Delete.json
      # - step: Domains_Delete
      #   exampleFile: ..\examples\Domains_Delete.json


# 10/10
# operation pass
# topic types pass
# Verifiedpartners pass
# PartnerRegistrations pass, channle not pass