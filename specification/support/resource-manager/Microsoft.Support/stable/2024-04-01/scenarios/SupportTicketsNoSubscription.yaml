# yaml-language-server: $schema=https://raw.githubusercontent.com/Azure/azure-rest-api-specs/main/documentation/api-scenario/references/v1.2/schema.json
scope: ResourceGroup

variables:
  supportTicketName:
    type: string
    prefix: go_supportnosub_test
  fileWorkspaceName:
    type: string
    prefix: fileworknosub
  fileName: gotest_nosub.txt
    # type: string
    # prefix: filename
  communicationName: communicnosub
    # type: string
    # prefix: communic
  # chatTranscriptName: chattrannosub
    # type: string
    # prefix: chattran

scenarios:
  - scenario: SupportTicketsNoSubscription
    description: /providers/Microsoft.Support/supportTickets/{supportTicketName}
    steps:
      - operationId: SupportTicketsNoSubscription_CheckNameAvailability
        exampleFile: ..\examples\CheckNameAvailability.json
      - operationId: SupportTicketsNoSubscription_Create
        # exampleFile: ..\examples\CreateBillingSupportTicket.json
        parameters: 
          createSupportTicketParameters:
            properties:
              title: go sdk live test, please close
              description: go sdk live test, please close
              serviceId: /providers/microsoft.support/services/376afb21-6bd3-91aa-fd58-39fd84d8c201
              problemClassificationId: /providers/microsoft.support/services/376afb21-6bd3-91aa-fd58-39fd84d8c201/problemclassifications/03014459-4572-f8f0-32b0-88833f234f25
              severity: minimal
              advancedDiagnosticConsent: No
              contactDetails: 
                firstName: test
                lastName: test
                preferredContactMethod: email
                primaryEmailAddress: test@microsoft.com
                preferredTimeZone: Dateline Standard Time
                country: USA
                preferredSupportLanguage: en-us

      - operationId: SupportTicketsNoSubscription_List
        exampleFile: ..\examples\ListSupportTickets.json
      - operationId: SupportTicketsNoSubscription_Get
        exampleFile: ..\examples\GetSupportTicketDetails.json
      - operationId: SupportTicketsNoSubscription_Update
        # exampleFile: ..\examples\UpdateSeverityOfSupportTicket.json
        parameters:
          updateSupportTicket:
              contactDetails:
                firstName: update_test

  # - scenario: CommunicationsNoSubscription
  #   description: /providers/Microsoft.Support/supportTickets/{supportTicketName}/communications/{communicationName}
  #   steps:
      - operationId: CommunicationsNoSubscription_CheckNameAvailability
        exampleFile: ..\examples\CheckNameAvailabilityForNoSubscriptionSupportTicketCommunication.json
      - operationId: CommunicationsNoSubscription_Create
        exampleFile: ..\examples\CreateNoSubscriptionSupportTicketCommunication.json
      - operationId: CommunicationsNoSubscription_List
        exampleFile: ..\examples\ListCommunicationsForSupportTicket.json
      - operationId: CommunicationsNoSubscription_Get
        exampleFile: ..\examples\GetCommunicationDetailsForSupportTicket.json

  # - scenario: FileWorkspacesNoSubscription
  #   description: /providers/Microsoft.Support/fileWorkspaces/{fileWorkspaceName}
  #   steps:
      - operationId: FileWorkspacesNoSubscription_Create
        exampleFile: ..\examples\CreateFileWorkspace.json
      - operationId: FileWorkspacesNoSubscription_Get
        exampleFile: ..\examples\GetFileWorkspaceDetails.json

  # - scenario: FilesNoSubscription
  #   description: /providers/Microsoft.Support/fileWorkspaces/{fileWorkspaceName}/files/{fileName}
  #   steps:
      - operationId: FilesNoSubscription_Create
        # exampleFile: ..\examples\CreateFile.json
        parameters:
          createFileParameters:
            properties:
              chunkSize: 4
              fileSize: 4
              numberOfChunks: 1
      - operationId: FilesNoSubscription_List
        exampleFile: ..\examples\ListFilesUnderFileWorkspace.json
      - operationId: FilesNoSubscription_Get
        exampleFile: ..\examples\GetFileDetails.json
      - operationId: FilesNoSubscription_Upload
        # exampleFile: ..\examples\UploadFile.json
        parameters:
          uploadFile:
            content: VGVzdA==

  # - scenario: ChatTranscriptsNoSubscription
  #   description: /providers/Microsoft.Support/supportTickets/{supportTicketName}/chatTranscripts/{chatTranscriptName}
  #   steps:
      - operationId: ChatTranscriptsNoSubscription_List
        # exampleFile: ..\examples\ListChatTranscriptsForSupportTicket.json
        parameters:
          supportTicketName: 2310200010003188
        outputVariables:
          chatTranscriptName:
            type: string
            fromResponse: /value/name
      - operationId: ChatTranscriptsNoSubscription_Get
        # exampleFile: ..\examples\GetchatTranscriptDetailsForSupportTicket.json
        parameters:
          supportTicketName: 2310200010003188
          chatTranscriptName: $(chatTranscriptName)