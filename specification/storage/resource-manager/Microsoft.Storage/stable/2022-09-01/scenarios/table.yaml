# yaml-language-server: $schema=https://raw.githubusercontent.com/Azure/azure-rest-api-specs/main/documentation/api-scenario/references/v1.2/schema.json
scope: ResourceGroup

variables:
  accountName: tableaccountnam

prepareSteps:
  - step: StorageAccount_Create
    exampleFile: ../examples/StorageAccountCreate.json
    requestUpdate:
      - replace: /parameters/kind
        value: StorageV2
      - remove: /parameters/extendedLocation

scenarios:
  - scenario: TableServices
    description: Microsoft.Storage/storageAccounts/{accountName}/tableServices/{tableServiceName}
    steps:
      - step: TableServices_SetServiceProperties
        exampleFile: ..\examples\TableServicesPut.json
        requestUpdate:
          - remove: /parameters/properties
        # operationId: TableServices_SetServiceProperties
        # parameters:
        #   FileServicesName: default
      - step: TableServices_List
        exampleFile: ..\examples\TableServicesList.json
      - step: TableServices_GetServiceProperties
        exampleFile: ..\examples\TableServicesGet.json
# pass
  - scenario: Table
    description: Microsoft.Storage/storageAccounts/{accountName}/tableServices/default/tables/{tableName}
    variables:
      tableName: tablename
    steps:
      - step: Table_Create
        exampleFile: ..\examples\TableOperationPut.json
      - step: Table_List
        exampleFile: ..\examples\TableOperationList.json
      - step: Table_Get
        exampleFile: ..\examples\TableOperationGet.json
      - step: Table_Update
        exampleFile: ..\examples\TableOperationPatch.json
      - step: Table_Delete
        exampleFile: ..\examples\TableOperationDelete.json